from UseProxy import *
from bs4 import BeautifulSoup

class GetMyDrivers(object):
    def __init__(self):
        self.url = 'http://www.mydrivers.com'
        self.content = ''
        self.lists = []

    def split_content(self, proxyset):
        # self.useproxy()
        self.content = proxyset.getproxy().open(self.url).read()
        soup = BeautifulSoup(self.content, "html.parser", from_encoding="gb18030")
        print soup.original_encoding
        found_div = soup.findAll('span', {'class': 'titl'})

        for i in range(len(found_div)):
            self.lists.append(found_div[i].contents[0])
        return self.lists

if __name__ == '__main__':
    g_news = GetMyDrivers()
    proxy_set = UseProxy()
    lists = g_news.split_content(proxy_set)
    for l in lists:
            print str(l).decode('utf-8').encode('gb18030')
